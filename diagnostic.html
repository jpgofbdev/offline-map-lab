<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Diagnostic Offline Map Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: system-ui; padding:20px; }
    pre { background:#f5f5f5; padding:10px; border-radius:6px; }
  </style>
</head>
<body>

<h2>Diagnostic Offline Map Lab</h2>

<div id="output">Chargement...</div>

<script>
(async function() {

  const out = document.getElementById("output");

  const sw = navigator.serviceWorker.controller ? "Actif" : "Inactif";
  const online = navigator.onLine ? "En ligne" : "Hors-ligne";

  const cachesList = await caches.keys();
  let details = "";

  for (const name of cachesList) {
    const cache = await caches.open(name);
    const requests = await cache.keys();
    details += `\nCache: ${name}\n`;
    details += `Entries: ${requests.length}\n`;
  }

  out.innerHTML = `
    <pre>
Service Worker : ${sw}
RÃ©seau : ${online}

Caches :
${cachesList.join("\n")}

${details}
    </pre>
  `;

})();
</script>

</body>
</html>
